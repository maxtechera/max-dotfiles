# Hyprland Configuration
# Modern tiling setup inspired by ThePrimagen

# Monitor setup (adjust to your setup)
monitor=,preferred,auto,1

# Execute at launch
exec-once = waybar
exec-once = swww init
exec-once = mako
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Set wallpaper (create default if not exists)
exec-once = mkdir -p ~/Pictures/Screenshots
exec-once = [ -f ~/Pictures/wallpaper.jpg ] || convert -size 2560x1440 plasma: ~/Pictures/wallpaper.jpg
exec-once = swww img ~/Pictures/wallpaper.jpg

# Some default env vars
env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct

# Input configuration
input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1

    touchpad {
        natural_scroll = true
        disable_while_typing = true
        tap-to-click = true
    }

    sensitivity = 0
}

# General settings - Match Aerospace (no gaps)
general {
    gaps_in = 0
    gaps_out = 0
    border_size = 2
    col.active_border = rgba(88c0d0ee) rgba(81a1c1ee) 45deg
    col.inactive_border = rgba(4c566aaa)
    
    layout = dwindle
    
    allow_tearing = false
}

# Decoration
decoration {
    rounding = 10
    
    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
        xray = true
        noise = 0.01
        contrast = 0.9
        brightness = 0.8
    }

    drop_shadow = true
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = rgba(1a1a1aee)
    
    active_opacity = 0.95
    inactive_opacity = 0.9
}

# Animations
animations {
    enabled = true

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    bezier = linear, 0.0, 0.0, 1.0, 1.0
    bezier = slow, 0, 0.85, 0.3, 1
    bezier = overshot, 0.13, 0.99, 0.29, 1.1
    bezier = bounce, 1.1, 1.6, 0.1, 0.85
    bezier = sligshot, 1, -0.7, 0.75, 1.25
    bezier = nice, 0, 0, 0.58, 1

    animation = windows, 1, 5, bounce, popin
    animation = windowsOut, 1, 5, bounce, popin
    animation = border, 1, 20, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 5, default
    animation = workspaces, 1, 5, overshot, slide
}

# Layout
dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_is_master = true
}

gestures {
    workspace_swipe = false
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    vfr = true
}

# Window rules - floating windows
windowrule = float, ^(pavucontrol)$
windowrule = float, ^(blueman-manager)$
windowrule = float, ^(nm-connection-editor)$
windowrule = float, ^(thunar)$
windowrule = float, title:^(File Operation Progress)$
windowrule = float, ^(1Password)$
windowrule = float, title:^(Picture-in-Picture)$

# Workspace assignments - matching Aerospace
# Default rule - all unassigned windows go to workspace 1
windowrulev2 = workspace 1, class:^(.*)$

# Browsers
windowrulev2 = workspace name:B, class:^(Google-chrome)$, title:^((?!.*Profile 1|.*Profile 2|.*Work).)*$
windowrulev2 = workspace name:C, class:^(Google-chrome)$, title:.*(Profile 1|Person 1).*
windowrulev2 = workspace name:D, class:^(Google-chrome)$, title:.*(Profile 2|Person 2).*
windowrulev2 = workspace name:W, class:^(Google-chrome)$, title:.*Work.*
windowrulev2 = workspace name:B, class:^(chromium)$
windowrulev2 = workspace name:B, class:^(firefox)$

# Development tools
windowrulev2 = workspace name:P, class:^(Postman)$
windowrulev2 = workspace 2, class:^(Code)$
windowrulev2 = workspace 2, class:^(code-oss)$

# Communication
windowrulev2 = workspace name:S, class:^(Slack)$
windowrulev2 = workspace name:Z, class:^(zoom)$

# Design & Media
windowrulev2 = workspace name:F, class:^(figma-linux)$
windowrulev2 = workspace name:O, class:^(Spotify)$

# Terminal (keep on current workspace)
windowrulev2 = workspace unset, class:^(ghostty)$

# Keybindings - Matching Aerospace on macOS
$mainMod = ALT

# Basic bindings (matching Aerospace)
bind = $mainMod, Return, exec, ghostty
bind = $mainMod, F, fullscreen
bind = $mainMod SHIFT, Space, togglefloating
bind = $mainMod, slash, layoutmsg, orientationnext
bind = $mainMod, comma, layoutmsg, cyclenext
bind = $mainMod, Q, killactive
bind = $mainMod SHIFT, E, exit

# Additional Aerospace keybindings
bind = CTRL ALT, r, exec, hyprctl reload
bind = CTRL SHIFT, f, workspace, name:F
bind = CTRL SHIFT, s, workspace, name:S
bind = CTRL SHIFT, m, workspace, name:M
bind = CTRL SHIFT, i, workspace, name:I

# Layout controls (matching Aerospace)
bind = CTRL SHIFT, 5, exec, hyprctl dispatch splitratio exact 0.5
bind = CTRL SHIFT, 7, exec, hyprctl dispatch splitratio exact 0.7
bind = CTRL SHIFT, 3, exec, hyprctl dispatch splitratio exact 0.3
bind = CTRL SHIFT, t, layoutmsg, orientationnext
bind = CTRL SHIFT, a, layoutmsg, cyclenext

# Screenshot (avoiding conflicts)
bind = $mainMod SHIFT, Print, exec, grimblast --notify copy area
bind = , Print, exec, grimblast --notify save area ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png
# Alternative screenshot bindings
bind = $mainMod, bracketleft, exec, grimblast --notify copy area
bind = $mainMod, bracketright, exec, grimblast --notify save screen ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png

# Move focus with Alt + vim keys (matching Aerospace)
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r

# Move windows (matching Aerospace)
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, j, movewindow, d
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, l, movewindow, r

# Resize windows (matching Aerospace smart resize)
bind = $mainMod, minus, resizeactive, -50 0
bind = $mainMod, equal, resizeactive, 50 0

# Switch workspaces (matching Aerospace - numbers and letters)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
# Letter workspaces (like Aerospace)
bind = $mainMod, a, workspace, name:A
bind = $mainMod, b, workspace, name:B
bind = $mainMod, c, workspace, name:C
bind = $mainMod, d, workspace, name:D
bind = $mainMod, e, workspace, name:E
bind = $mainMod, g, workspace, name:G
bind = $mainMod, i, workspace, name:I
bind = $mainMod, m, workspace, name:M
bind = $mainMod, n, workspace, name:N
bind = $mainMod, p, workspace, name:P
bind = $mainMod, q, workspace, name:Q
bind = $mainMod, r, workspace, name:R
bind = $mainMod, s, workspace, name:S
bind = $mainMod, t, workspace, name:T
bind = $mainMod, u, workspace, name:U
bind = $mainMod, v, workspace, name:V
bind = $mainMod, w, workspace, name:W
bind = $mainMod, x, workspace, name:X
bind = $mainMod, y, workspace, name:Y
bind = $mainMod, z, workspace, name:Z

# Move active window to workspace (matching Aerospace)
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
# Move to letter workspaces
bind = $mainMod SHIFT, a, movetoworkspace, name:A
bind = $mainMod SHIFT, b, movetoworkspace, name:B
bind = $mainMod SHIFT, c, movetoworkspace, name:C
bind = $mainMod SHIFT, d, movetoworkspace, name:D
bind = $mainMod SHIFT, e, movetoworkspace, name:E
bind = $mainMod SHIFT, g, movetoworkspace, name:G
bind = $mainMod SHIFT, i, movetoworkspace, name:I
bind = $mainMod SHIFT, m, movetoworkspace, name:M
bind = $mainMod SHIFT, n, movetoworkspace, name:N
bind = $mainMod SHIFT, o, movetoworkspace, name:O
bind = $mainMod SHIFT, p, movetoworkspace, name:P
bind = $mainMod SHIFT, q, movetoworkspace, name:Q
bind = $mainMod SHIFT, r, movetoworkspace, name:R
bind = $mainMod SHIFT, s, movetoworkspace, name:S
bind = $mainMod SHIFT, t, movetoworkspace, name:T
bind = $mainMod SHIFT, u, movetoworkspace, name:U
bind = $mainMod SHIFT, v, movetoworkspace, name:V
bind = $mainMod SHIFT, w, movetoworkspace, name:W
bind = $mainMod SHIFT, x, movetoworkspace, name:X
bind = $mainMod SHIFT, y, movetoworkspace, name:Y
bind = $mainMod SHIFT, z, movetoworkspace, name:Z

# Workspace back-and-forth (matching Aerospace)
bind = $mainMod, Tab, workspace, previous

# Move workspace to monitor (matching Aerospace)
bind = $mainMod SHIFT, Tab, movecurrentworkspacetomonitor, +1

# Mouse bindings (matching Aerospace behavior)
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Volume control
binde = , XF86AudioRaiseVolume, exec, pamixer -i 5
binde = , XF86AudioLowerVolume, exec, pamixer -d 5
bind = , XF86AudioMute, exec, pamixer -t

# Brightness control
binde = , XF86MonBrightnessUp, exec, brightnessctl s +5%
binde = , XF86MonBrightnessDown, exec, brightnessctl s 5%-

# Media control
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous